#+TAGS: ssh


* ssh 									:ssh:
* Description
* Usage
** ssh Key Generation
#+BEGIN_SRC sh
ssh-keygen
#+END_SRC
This will then prompt for a name for the new key

** ssh Tools
*** ssh-copy-id
#+BEGIN_SRC sh
ssh-copy-id crito@192.168.0.5
#+END_SRC
You will be prompted for your password, if no ssh key configured
*** ssh-agent
To enable the ssh-agent
#+BEGIN_SRC sh
eval $(ssh-agent)
#+END_SRC

*** Many keys set
Using ssh-agent with multiple keys can cause problems when login into many servers.
Each key is considered an attempt, so if a limit is set then you can end up locked out.

*** Setting up ssh-agent as a sysd service
[Unit]
Description=SSH key agent

[Service]
Type=forking
Environment=SSH_AUTH_SOCK=%t/ssh-agent.socket
ExecStart=/usr/bin/ssh-agent -a $SSH_AUTH_SOCK

[Install]
WantedBy=default.target

*** Adding to zshrc
- add this line to .zshrc
export SSH_AUTH_SOCK="$XDG_RUNTIME_DIR/ssh-agent.socket"

*** ssh-add
#+BEGIN_SRC sh
ssh-add ~/.ssh/git_eurus
#+END_SRC
*** Check what identities are currently set
#+BEGIN_SRC sh
ssh-add -l
#+END_SRC

*** add key/identity
#+BEGIN_SRC sh
ssh-add $KEY
#+END_SRC

*** remove key/identity
#+BEGIN_SRC sh
ssh-add -d $KEY
#+END_SRC

*** remove all keys/identities
#+BEGIN_SRC sh
ssh-add -D
#+END_SRC

*** ssh-keygen
*** ssh-copy-id
** Check an ssh keys password
#+BEGIN_SRC sh
eval $(ssh-agent)
ssh-add .ssh/id_rsa
#+END_SRC
If this key has a passphrase you will be challenged. 
To unload the key
#+BEGIN_SRC sh
ssh-add -d .ssh/id_rsa
#+END_SRC
* Lecture
* Tutorial
* Books
* Links
