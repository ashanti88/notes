#+TAGS: disk filesystem storage disk_layout


* Disk Management
* Files
/proc/partitions - this shows all the current partirions on the system
/dev/mapper - this is where encrypted partitions are kept
/etc/crypttab - this is the configuration file for encrypted files
** /etc/fstab - contains the configuration for which disks to be mounted at boot
Columns
  1. UUID or Label or device name
  2. mount point
  3. file system of partition
  4. mount options - defaults is normally set
  5. Backup Support (dump) - though dump isn't used much today, some modern bakup utilites required dump - 1 - yes | 0 - no
  6. fsck option - this option allows for fsck to be run at boot - 0 don't check | 1 check root fs | 2 check none root fs

example using UUID, Lable and device
#+BEGIN_EXAMPLE
/dev/sda1 /home xfs defaults 1 2
# <file system>                           <mount point>  <type>  <options>  <dump>  <pass>     
UUID=b5632fb9-5b21-48ef-afe2-1613a2698aba /              ext4    defaults,noatime,discard 0       1
tmpfs                                     /tmp           tmpfs   defaults,noatime,mode=1777 0       0
/dev/mapper/enc_hdd                       /mnt           ext4    defaults,noatime,discard 0 2  
LABLE=myfs				  /data          xfs     defaults,noatime, 0 2
#+END_EXAMPLE

* Cmds
- [[file://home/crito/org/tech/cmds/mkfs.org][mkfs]]
- [[file://home/crito/org/tech/cmds/e2label.org][e2label]]
- [[file://home/crito/org/tech/cmds/gparted.org][gparted]]
- [[file://home/crito/org/tech/cmds/parted.org][parted]]
- [[file://home/crito/org/tech/cmds/fdisk.org][fdisk]]
- [[file://home/crito/org/tech/cmds/tune2fs.org][tune2fs]]
- [[file://home/crito/org/tech/cmds/gpart.org][gpart]]

* Usage
** Disk Layout
- First what is the server to be used for?
  - logging server
  - web server
  - mail server
  - dns server

- Decide what partitions you are going to create, and where they are to be mounted
  - /etc  - has to be part of / and can't be on a seperate partition 
  - /boot - 2GiB is a good amount, remember that you may want to have a couple of kernels, just in case an issue occurs with one
  - swap  - 2 x RAM but not greater than 8GiB
  - /home - This is wholey dependent on what your needs are, in a lot of casues the remainder of the disk is given to /home
  - /var  - This is an important directory that holds logs and mysql data files (if a DB server think of having this on its own partition)
  - /opt  - This is rarely put on it's own partition, but is sometimes

* Lecture
* Tutorial
* Books
* Links

