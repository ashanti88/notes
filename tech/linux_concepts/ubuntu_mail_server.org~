#+TAGS:


* Ubuntu Mail Server
* Cmds
[[file://home/crito/org/tech/cmds/openssl.org][Openssl]]

* Software
[[file://home/crito/org/tech/mail/postfix.org][Postfix]]
[[file://home/crito/org/tech/mail/dovecot.org][Dovecot]]

* Install & Config
** Initial Setup
*** 1. Set hostname for server
#+BEGIN_SRC sh
hostnamectl set-hostname mail.alick.com
#+END_SRC

*** 2. Make host entry with ip in /etc/hosts
#+BEGIN_SRC sh
echo "172.27.0.51 mail.alick.com" >> /etc/hosts
#+END_SRC

*** 3. Install required packages
#+BEGIN_SRC sh
apt-get install postfix dovecot-imapd dovecot-pop3d
#+END_SRC
This should initiate an ncurses wizard

** Postfix & Dovecot config
1. Configure Mail Directories
edit /etc/postfix/main.cf to place mail into a directory as single files, instead of one single file. These single files are known as a mbox mail stores.
#+BEGIN_SRC sh
mail_spool_directory = /var/mail
home_mailbox = .Mail/
#+END_SRC

2. Backup dovecot.conf
#+BEGIN_SRC sh
cp /etc/dovecot/dovecot.conf /etc/dovecot/dovecot.conf.orig
#+END_SRC

3. Edit dovecot.conf to contain below
#+BEGIN_SRC sh
disable_plaintext_auth = no
mail_location = maildir:~/.Mail
namespace inbox {
  inbox = yes
  mailbox Drafts {
    special_use = \Drafts
  }
  mailbox Sent {
    special_use = \Sent
  }
  mailbox Trash {
    special_use = \Trash
  }
}
passdb {
  driver = pam
}
protocols = " imap pop3"
ssl = no
userdb {
  driver = passwd
}
#+END_SRC

4. Setting up virtual users


* Lecture
* Tutorial
* Books
* Links
[[https://www.linux.com/learn/how-build-email-server-ubuntu-linux][How to Build an Email Server on Ubuntu Linux]]
